!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.bRando=e():t.bRando=e()}(this,(function(){return function(){"use strict";var t={d:function(e,s){for(var r in s)t.o(s,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:s[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{create:function(){return r}});class s{get backgrounds(){return this._backgrounds}set backgrounds(t){this._backgrounds=null==t?['url("/img/alex-knight-vaA6EQiUSo4-unsplash_result.jpg") center/cover no-repeat','url("/img/joel-fulgencio-01fAtHwYqo0-unsplash_result.jpg") center/cover no-repeat','url("/img/pawel-nolbert-4u2U8EO9OzY-unsplash_result.jpg") center/cover no-repeat','url("/img/stephan-valentin-oqYLdbuJDQU-unsplash_result.jpg") center/cover no-repeat','url("/img/waranont-joe-T7qyLNPwgKA-unsplash_result.jpg") center/cover no-repeat']:t}get timeout(){return this._timeout}set timeout(t){this._timeout=t||1e4}get random(){return this._random}set random(t){this._random=null==t||t}get CSSTransition(){return this._CSSTransition}set CSSTransition(t){this._CSSTransition=null==t?"5000ms":t}get isAfterOpaque(){return this._isAfterOpaque}set isAfterOpaque(t){this._isAfterOpaque=t}get lastBackground(){return this._lastBackground}set lastBackground(t){this._lastBackground=t}constructor(t,e,s,r,i){this.CSSSelector=null==t||""==t?"body":t,this.nodes=document.querySelectorAll(this.CSSSelector),this.backgrounds=e,this.timeout=s,this.random=r,this.CSSTransition=i,this.originalCSSBackgrounds=[],this.originalCSSPositions=[],this.nodes.forEach((t=>{this.originalCSSBackgrounds.push(t.style.background),this.originalCSSPositions.push(t.style.position),t.style.position="relative"})),this.styleElement=document.createElement("style"),this.CSSBackgroundVarName=`--bRandoBg${this.CSSSelector.replace(/[^a-z0-9]/gi,"")}`,this.CSSOpacityVarName=`--bRandoOpacity${this.CSSSelector.replace(/[^a-z0-9]/gi,"")}`,this.CSSTransitionVarName=`--bRandoTransition${this.CSSSelector.replace(/[^a-z0-9]/gi,"")}`,this.styleElement.innerText=`${this.CSSSelector}::after{background:var(${this.CSSBackgroundVarName});content:'';position:absolute;top:0;bottom:0;left:0;right:0;z-index:-1;opacity:var(${this.CSSOpacityVarName});transition: var(${this.CSSTransitionVarName});}`,document.head.append(this.styleElement),this.isAfterOpaque=!1,this.lastBackground=-1,this.nodes.forEach((t=>{t.style.setProperty(this.CSSOpacityVarName,"0"),t.style.setProperty(this.CSSTransitionVarName,`opacity ${this.CSSTransition}`),t.style.zIndex="0"}))}play(){this.next(),this.timer=window.setInterval((()=>{this.next()}),this.timeout)}pause(){clearInterval(this.timer)}next(){this.lastBackground=this.random?(()=>{let t;do{t=Math.floor(Math.random()*this.backgrounds.length)}while(this.lastBackground===t);return t})():this.lastBackground===this.backgrounds.length-1?this.lastBackground=0:this.lastBackground+1,this.nodes.forEach((t=>{this.isAfterOpaque?(t.style.background=this.backgrounds[this.lastBackground],t.style.setProperty(this.CSSOpacityVarName,"0")):(t.style.setProperty(this.CSSBackgroundVarName,this.backgrounds[this.lastBackground]),t.style.setProperty(this.CSSOpacityVarName,"1"))})),this.isAfterOpaque=!this.isAfterOpaque}remove(){this.pause(),this.nodes.forEach(((t,e)=>{t.style.background=this.originalCSSBackgrounds[e],t.style.position=this.originalCSSPositions[e]}))}}function r(t,e,r,i,n){return new s(t,e,r,i,n)}return e}()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM1QixDQUNBeUMsU0FDQ25FLEtBQUs0RCxRQUNMNUQsS0FBS2lDLE1BQU1LLFNBQVEsQ0FBQ0MsRUFBRzZCLEtBQ3JCN0IsRUFBa0JFLE1BQU1DLFdBQWExQyxLQUFLb0MsdUJBQXVCZ0MsR0FDakU3QixFQUFrQkUsTUFBTUUsU0FBVzNDLEtBQUtxQyxxQkFBcUIrQixFQUFFLEdBRWxFLEVDaklNLFNBQVNDLEVBQU90QyxFQUFxQkMsRUFBMEJaLEVBQWtCRSxFQUFrQkUsR0FDekcsT0FBTyxJQUFJUCxFQUFPYyxFQUFhQyxFQUFnQlosRUFBU0UsRUFBUUUsRUFDakUsQyIsInNvdXJjZXMiOlsid2VicGFjazovL2JSYW5kby93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vYlJhbmRvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JSYW5kby93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYlJhbmRvL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vYlJhbmRvL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vYlJhbmRvLy4vc3JjL2JSYW5kby50cyIsIndlYnBhY2s6Ly9iUmFuZG8vLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiYlJhbmRvXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImJSYW5kb1wiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIGJSYW5kbyB7XG5cdHJlYWRvbmx5IG5vZGVzOiBOb2RlTGlzdDtcblx0cmVhZG9ubHkgQ1NTU2VsZWN0b3I6IHN0cmluZztcblxuXHRwcml2YXRlIF9iYWNrZ3JvdW5kczogc3RyaW5nW107XG5cdHB1YmxpYyBnZXQgYmFja2dyb3VuZHMoKTogc3RyaW5nW10ge1xuXHRcdHJldHVybiB0aGlzLl9iYWNrZ3JvdW5kcztcblx0fVxuXHRwdWJsaWMgc2V0IGJhY2tncm91bmRzKHZhbHVlOiBzdHJpbmdbXSkge1xuXHRcdC8vIHByZXR0aWVyLWlnbm9yZVxuXHRcdHRoaXMuX2JhY2tncm91bmRzID0gdmFsdWUgPT0gbnVsbCA/IFtcbiAgICAgICAgICAgICd1cmwoXCIvaW1nL2FsZXgta25pZ2h0LXZhQTZFUWlVU280LXVuc3BsYXNoX3Jlc3VsdC5qcGdcIikgY2VudGVyL2NvdmVyIG5vLXJlcGVhdCcsIFxuICAgICAgICAgICAgJ3VybChcIi9pbWcvam9lbC1mdWxnZW5jaW8tMDFmQXRId1lxbzAtdW5zcGxhc2hfcmVzdWx0LmpwZ1wiKSBjZW50ZXIvY292ZXIgbm8tcmVwZWF0JywgXG4gICAgICAgICAgICAndXJsKFwiL2ltZy9wYXdlbC1ub2xiZXJ0LTR1MlU4RU85T3pZLXVuc3BsYXNoX3Jlc3VsdC5qcGdcIikgY2VudGVyL2NvdmVyIG5vLXJlcGVhdCcsXG4gICAgICAgICAgICAndXJsKFwiL2ltZy9zdGVwaGFuLXZhbGVudGluLW9xWUxkYnVKRFFVLXVuc3BsYXNoX3Jlc3VsdC5qcGdcIikgY2VudGVyL2NvdmVyIG5vLXJlcGVhdCcsXG4gICAgICAgICAgICAndXJsKFwiL2ltZy93YXJhbm9udC1qb2UtVDdxeUxOUHdnS0EtdW5zcGxhc2hfcmVzdWx0LmpwZ1wiKSBjZW50ZXIvY292ZXIgbm8tcmVwZWF0JyxcbiAgICAgICAgXSA6IHZhbHVlO1xuXHR9XG5cblx0cHJpdmF0ZSBfdGltZW91dDogbnVtYmVyO1xuXHRwdWJsaWMgZ2V0IHRpbWVvdXQoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fdGltZW91dDtcblx0fVxuXHRwdWJsaWMgc2V0IHRpbWVvdXQodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX3RpbWVvdXQgPSB2YWx1ZSB8fCAxMDAwMDtcblx0fVxuXG5cdHByaXZhdGUgX3JhbmRvbTogYm9vbGVhbjtcblx0cHVibGljIGdldCByYW5kb20oKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX3JhbmRvbTtcblx0fVxuXHRwdWJsaWMgc2V0IHJhbmRvbSh2YWx1ZTogYm9vbGVhbikge1xuXHRcdHRoaXMuX3JhbmRvbSA9IHZhbHVlICE9IG51bGwgPyB2YWx1ZSA6IHRydWU7XG5cdH1cblxuXHRwcml2YXRlIF9DU1NUcmFuc2l0aW9uOiBzdHJpbmc7XG5cdHB1YmxpYyBnZXQgQ1NTVHJhbnNpdGlvbigpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9DU1NUcmFuc2l0aW9uO1xuXHR9XG5cdHB1YmxpYyBzZXQgQ1NTVHJhbnNpdGlvbih2YWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5fQ1NTVHJhbnNpdGlvbiA9IHZhbHVlID09IG51bGwgPyBcIjUwMDBtc1wiIDogdmFsdWU7XG5cdH1cblxuXHRwcml2YXRlIHRpbWVyOiBudW1iZXI7XG5cdHJlYWRvbmx5IG9yaWdpbmFsQ1NTQmFja2dyb3VuZHM6IHN0cmluZ1tdO1xuXHRyZWFkb25seSBvcmlnaW5hbENTU1Bvc2l0aW9uczogc3RyaW5nW107XG5cdHJlYWRvbmx5IHN0eWxlRWxlbWVudDogSFRNTEVsZW1lbnQ7XG5cblx0cHJpdmF0ZSBfaXNBZnRlck9wYXF1ZTogYm9vbGVhbjtcblx0cHJpdmF0ZSBnZXQgaXNBZnRlck9wYXF1ZSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5faXNBZnRlck9wYXF1ZTtcblx0fVxuXHRwcml2YXRlIHNldCBpc0FmdGVyT3BhcXVlKHZhbHVlOiBib29sZWFuKSB7XG5cdFx0dGhpcy5faXNBZnRlck9wYXF1ZSA9IHZhbHVlO1xuXHR9XG5cblx0cmVhZG9ubHkgQ1NTQmFja2dyb3VuZFZhck5hbWU6IHN0cmluZztcblx0cmVhZG9ubHkgQ1NTT3BhY2l0eVZhck5hbWU6IHN0cmluZztcblx0cmVhZG9ubHkgQ1NTVHJhbnNpdGlvblZhck5hbWU6IHN0cmluZztcblxuXHRwcml2YXRlIF9sYXN0QmFja2dyb3VuZDogbnVtYmVyO1xuXHRwdWJsaWMgZ2V0IGxhc3RCYWNrZ3JvdW5kKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2xhc3RCYWNrZ3JvdW5kO1xuXHR9XG5cdHByaXZhdGUgc2V0IGxhc3RCYWNrZ3JvdW5kKHZhbHVlOiBudW1iZXIpIHtcblx0XHR0aGlzLl9sYXN0QmFja2dyb3VuZCA9IHZhbHVlO1xuXHR9XG5cblx0Y29uc3RydWN0b3IoQ1NTU2VsZWN0b3I/OiBzdHJpbmcsIENTU0JhY2tncm91bmRzPzogc3RyaW5nW10sIHRpbWVvdXQ/OiBudW1iZXIsIHJhbmRvbT86IGJvb2xlYW4sIENTU1RyYW5zaXRpb24/OiBzdHJpbmcpIHtcblx0XHR0aGlzLkNTU1NlbGVjdG9yID0gQ1NTU2VsZWN0b3IgPT0gbnVsbCB8fCBDU1NTZWxlY3RvciA9PSBcIlwiID8gXCJib2R5XCIgOiBDU1NTZWxlY3Rvcjtcblx0XHR0aGlzLm5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLkNTU1NlbGVjdG9yKTtcblx0XHR0aGlzLmJhY2tncm91bmRzID0gQ1NTQmFja2dyb3VuZHM7XG5cdFx0dGhpcy50aW1lb3V0ID0gdGltZW91dDtcblx0XHR0aGlzLnJhbmRvbSA9IHJhbmRvbTtcblx0XHR0aGlzLkNTU1RyYW5zaXRpb24gPSBDU1NUcmFuc2l0aW9uO1xuXHRcdHRoaXMub3JpZ2luYWxDU1NCYWNrZ3JvdW5kcyA9IFtdO1xuXHRcdHRoaXMub3JpZ2luYWxDU1NQb3NpdGlvbnMgPSBbXTtcblx0XHR0aGlzLm5vZGVzLmZvckVhY2goKGUpID0+IHtcblx0XHRcdHRoaXMub3JpZ2luYWxDU1NCYWNrZ3JvdW5kcy5wdXNoKChlIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5iYWNrZ3JvdW5kKTsgLy8gYmFja3VwIHRoZSBvcmlnaW5hbCBDU1MgYmFja2dyb3VuZCBwcm9wZXJ0eVxuXHRcdFx0dGhpcy5vcmlnaW5hbENTU1Bvc2l0aW9ucy5wdXNoKChlIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5wb3NpdGlvbik7IC8vIGJhY2t1cCB0aGUgb3JpZ2luYWwgQ1NTIHBvc2l0aW9uIHByb3BlcnR5XG5cdFx0XHQoZSBhcyBIVE1MRWxlbWVudCkuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7IC8vIHNldCBlYWNoIGVsZW1lbnQgdG8gYmUgcmVsYXRpdmVcblx0XHR9KTtcblx0XHR0aGlzLnN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblx0XHR0aGlzLkNTU0JhY2tncm91bmRWYXJOYW1lID0gYC0tYlJhbmRvQmcke3RoaXMuQ1NTU2VsZWN0b3IucmVwbGFjZSgvW15hLXowLTldL2dpLCBcIlwiKX1gO1xuXHRcdHRoaXMuQ1NTT3BhY2l0eVZhck5hbWUgPSBgLS1iUmFuZG9PcGFjaXR5JHt0aGlzLkNTU1NlbGVjdG9yLnJlcGxhY2UoL1teYS16MC05XS9naSwgXCJcIil9YDtcblx0XHR0aGlzLkNTU1RyYW5zaXRpb25WYXJOYW1lID0gYC0tYlJhbmRvVHJhbnNpdGlvbiR7dGhpcy5DU1NTZWxlY3Rvci5yZXBsYWNlKC9bXmEtejAtOV0vZ2ksIFwiXCIpfWA7XG5cdFx0dGhpcy5zdHlsZUVsZW1lbnQuaW5uZXJUZXh0ID0gYCR7dGhpcy5DU1NTZWxlY3Rvcn06OmFmdGVye2JhY2tncm91bmQ6dmFyKCR7dGhpcy5DU1NCYWNrZ3JvdW5kVmFyTmFtZX0pO2NvbnRlbnQ6Jyc7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7Ym90dG9tOjA7bGVmdDowO3JpZ2h0OjA7ei1pbmRleDotMTtvcGFjaXR5OnZhcigke3RoaXMuQ1NTT3BhY2l0eVZhck5hbWV9KTt0cmFuc2l0aW9uOiB2YXIoJHt0aGlzLkNTU1RyYW5zaXRpb25WYXJOYW1lfSk7fWA7XG5cdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmQodGhpcy5zdHlsZUVsZW1lbnQpO1xuXHRcdHRoaXMuaXNBZnRlck9wYXF1ZSA9IGZhbHNlO1xuXHRcdHRoaXMubGFzdEJhY2tncm91bmQgPSAtMTtcblx0XHR0aGlzLm5vZGVzLmZvckVhY2goKGUpID0+IHtcblx0XHRcdChlIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5zZXRQcm9wZXJ0eSh0aGlzLkNTU09wYWNpdHlWYXJOYW1lLCBcIjBcIik7XG5cdFx0XHQoZSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuc2V0UHJvcGVydHkodGhpcy5DU1NUcmFuc2l0aW9uVmFyTmFtZSwgYG9wYWNpdHkgJHt0aGlzLkNTU1RyYW5zaXRpb259YCk7XG5cdFx0XHQoZSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuekluZGV4ID0gXCIwXCI7XG5cdFx0fSk7XG5cdH1cblx0cGxheSgpOiB2b2lkIHtcblx0XHR0aGlzLm5leHQoKTtcblx0XHR0aGlzLnRpbWVyID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcblx0XHRcdHRoaXMubmV4dCgpO1xuXHRcdH0sIHRoaXMudGltZW91dCk7XG5cdH1cblx0cGF1c2UoKTogdm9pZCB7XG5cdFx0Y2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcblx0fVxuXHRuZXh0KCk6IHZvaWQge1xuXHRcdGNvbnN0IGdldE5ld1JhbmRvbUJhY2tncm91bmRJbmRleCA9ICgpOiBudW1iZXIgPT4ge1xuXHRcdFx0bGV0IG5ld0luZGV4OiBudW1iZXI7XG5cdFx0XHRkbyB7XG5cdFx0XHRcdG5ld0luZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5iYWNrZ3JvdW5kcy5sZW5ndGgpO1xuXHRcdFx0fSB3aGlsZSAodGhpcy5sYXN0QmFja2dyb3VuZCA9PT0gbmV3SW5kZXgpO1xuXHRcdFx0cmV0dXJuIG5ld0luZGV4O1xuXHRcdH07XG5cdFx0dGhpcy5sYXN0QmFja2dyb3VuZCA9IHRoaXMucmFuZG9tID8gZ2V0TmV3UmFuZG9tQmFja2dyb3VuZEluZGV4KCkgOiB0aGlzLmxhc3RCYWNrZ3JvdW5kID09PSB0aGlzLmJhY2tncm91bmRzLmxlbmd0aCAtIDEgPyAodGhpcy5sYXN0QmFja2dyb3VuZCA9IDApIDogdGhpcy5sYXN0QmFja2dyb3VuZCArIDE7XG5cdFx0dGhpcy5ub2Rlcy5mb3JFYWNoKChlKSA9PiB7XG5cdFx0XHRpZiAoIXRoaXMuaXNBZnRlck9wYXF1ZSkge1xuXHRcdFx0XHQoZSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuc2V0UHJvcGVydHkodGhpcy5DU1NCYWNrZ3JvdW5kVmFyTmFtZSwgdGhpcy5iYWNrZ3JvdW5kc1t0aGlzLmxhc3RCYWNrZ3JvdW5kXSk7XG5cdFx0XHRcdChlIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5zZXRQcm9wZXJ0eSh0aGlzLkNTU09wYWNpdHlWYXJOYW1lLCBcIjFcIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQoZSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuYmFja2dyb3VuZCA9IHRoaXMuYmFja2dyb3VuZHNbdGhpcy5sYXN0QmFja2dyb3VuZF07XG5cdFx0XHRcdChlIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5zZXRQcm9wZXJ0eSh0aGlzLkNTU09wYWNpdHlWYXJOYW1lLCBcIjBcIik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0dGhpcy5pc0FmdGVyT3BhcXVlID0gIXRoaXMuaXNBZnRlck9wYXF1ZTtcblx0fVxuXHRyZW1vdmUoKTogdm9pZCB7XG5cdFx0dGhpcy5wYXVzZSgpO1xuXHRcdHRoaXMubm9kZXMuZm9yRWFjaCgoZSwgaSkgPT4ge1xuXHRcdFx0KGUgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmJhY2tncm91bmQgPSB0aGlzLm9yaWdpbmFsQ1NTQmFja2dyb3VuZHNbaV07IC8vIHJlc3RvcmUgb3JpZ2luYWwgQ1NTIGJhY2tncm91bmQgcHJvcGVydHlcblx0XHRcdChlIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5wb3NpdGlvbiA9IHRoaXMub3JpZ2luYWxDU1NQb3NpdGlvbnNbaV07IC8vIHJlc3RvcmUgb3JpZ2luYWwgQ1NTIHBvc2l0aW9uIHByb3BlcnR5XG5cdFx0fSk7XG5cdH1cbn1cbiIsImltcG9ydCBiUmFuZG8gZnJvbSBcIi4vYlJhbmRvXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoQ1NTU2VsZWN0b3I6IHN0cmluZywgQ1NTQmFja2dyb3VuZHM6IHN0cmluZ1tdLCB0aW1lb3V0PzogbnVtYmVyLCByYW5kb20/OiBib29sZWFuLCBDU1NUcmFuc2l0aW9uPzogc3RyaW5nKTogYlJhbmRvIHtcblx0cmV0dXJuIG5ldyBiUmFuZG8oQ1NTU2VsZWN0b3IsIENTU0JhY2tncm91bmRzLCB0aW1lb3V0LCByYW5kb20sIENTU1RyYW5zaXRpb24pO1xufVxuXG4vLyBjb25zdCBkZW1vID0gbmV3IGJSYW5kbygpO1xuLy8gZGVtby5wbGF5KCk7XG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwidGhpcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwiYlJhbmRvIiwiYmFja2dyb3VuZHMiLCJfYmFja2dyb3VuZHMiLCJ0aW1lb3V0IiwiX3RpbWVvdXQiLCJyYW5kb20iLCJfcmFuZG9tIiwiQ1NTVHJhbnNpdGlvbiIsIl9DU1NUcmFuc2l0aW9uIiwiaXNBZnRlck9wYXF1ZSIsIl9pc0FmdGVyT3BhcXVlIiwibGFzdEJhY2tncm91bmQiLCJfbGFzdEJhY2tncm91bmQiLCJjb25zdHJ1Y3RvciIsIkNTU1NlbGVjdG9yIiwiQ1NTQmFja2dyb3VuZHMiLCJub2RlcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsIm9yaWdpbmFsQ1NTQmFja2dyb3VuZHMiLCJvcmlnaW5hbENTU1Bvc2l0aW9ucyIsImZvckVhY2giLCJlIiwicHVzaCIsInN0eWxlIiwiYmFja2dyb3VuZCIsInBvc2l0aW9uIiwic3R5bGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsIkNTU0JhY2tncm91bmRWYXJOYW1lIiwicmVwbGFjZSIsIkNTU09wYWNpdHlWYXJOYW1lIiwiQ1NTVHJhbnNpdGlvblZhck5hbWUiLCJpbm5lclRleHQiLCJoZWFkIiwiYXBwZW5kIiwic2V0UHJvcGVydHkiLCJ6SW5kZXgiLCJwbGF5IiwibmV4dCIsInRpbWVyIiwid2luZG93Iiwic2V0SW50ZXJ2YWwiLCJwYXVzZSIsImNsZWFySW50ZXJ2YWwiLCJuZXdJbmRleCIsIk1hdGgiLCJmbG9vciIsImxlbmd0aCIsImdldE5ld1JhbmRvbUJhY2tncm91bmRJbmRleCIsInJlbW92ZSIsImkiLCJjcmVhdGUiXSwic291cmNlUm9vdCI6IiJ9