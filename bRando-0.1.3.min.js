/**
 * @name bRando.js
 * @version 0.1.3
 * @description A CSS background property randomizer capable of transitioning between images, colors, and gradients.
 * @author Isaac "yak" L. @isaacyakl www.isaacyakl.com
 * @license MIT License https://isaacyakl.github.io/brandojs/LICENSE
 */
const bRando={version:"0.1.3",bRandoBackgroundRandomizers:[],bRandoPreloadedImgs:[],extractImgURL:r=>{if(r.includes("url(")){return r.substring(r.indexOf("url(")+5).substring(0,r.substring(r.indexOf("url(")+5).indexOf(r[r.indexOf("url(")+4]))}return 1},isPreloadedImg:r=>{for(let n=0;n<bRando.bRandoPreloadedImgs.length;n++)if(bRando.bRandoPreloadedImgs[n].src==r)return!0;return!1},new:(r,n,t,e,a)=>{let o=new bRandoBackgroundRandomizer;return null!=r&&(o.selector_string=r),o.elements=document.querySelectorAll(o.selector_string),0==o.elements.length?1:(null!=n&&(o.background_arr=n),null!=t&&(o.interval_ms=t),null!=e&&(o.transition_ms=e),null!=a&&(o.random_order=a),o.og_transition_property=o.elements[0].style.transition,o.og_background_property=o.elements[0].style.background,o.background_arr.forEach(r=>{let n=bRando.extractImgURL(r);if(1!=n&&!bRando.isPreloadedImg(n)){let r=document.createElement("img");r.style.display="none",r.onerror=()=>{console.error("Error preloading "+r.src+".")},r.onload=()=>{bRando.bRandoPreloadedImgs.push(r),-1==o.last_background&&o.next()},r.src=n}}),bRando.bRandoBackgroundRandomizers.forEach(r=>{if(r.selector_string===o.selector_string)return o.og_transition_property=r.og_transition_property,o.og_background_property=r.og_background_property,void r.remove()}),bRando.bRandoBackgroundRandomizers.push(o),o.elements.forEach(r=>{r.style.transition="background "+o.transition_ms/1e3+"s ease-out"}),o.next(),o.play(),o)},nextAll:()=>{var r=0;return bRando.bRandoBackgroundRandomizers.forEach(n=>{0!=n.next()&&r++}),r},pauseAll:()=>{var r=0;return bRando.bRandoBackgroundRandomizers.forEach(n=>{0!=n.pause()&&r++}),r},playAll:()=>{var r=0;return bRando.bRandoBackgroundRandomizers.forEach(n=>{0!=n.play()&&r++}),r},removeAll:()=>{return Array.from(bRando.bRandoBackgroundRandomizers).forEach(r=>{r.remove()}),0}};class bRandoBackgroundRandomizer{constructor(){this.selector_string="html",this.elements=[],this.background_arr=["url('https://images.unsplash.com/photo-1497250681960-ef046c08a56e')","fixed url('https://images.unsplash.com/photo-1491147334573-44cbb4602074') center no-repeat","url('https://images.unsplash.com/photo-1543835683-ec5466c68daa')","url('https://images.unsplash.com/photo-1485841938031-1bf81239b815')","url('https://images.unsplash.com/photo-1550353185-761a5da3ee96')","linear-gradient(90deg, rgba(2,0,36,1) 0%, rgba(9,9,121,1) 35%, rgba(0,212,255,1) 100%)","rgba(131,92,59,1.0)",'url("https://images.unsplash.com/photo-1449496967047-2a322e78ec26")',"url('https://images.unsplash.com/photo-1517789171-f2c4f83f1afd')","url('https://images.unsplash.com/photo-1552084117-56a987666449')","#ff00fff0","#6c757d"],this.interval_ms=1e4,this.transition_ms=2500,this.random_order=!0,this.randomizer_id=null,this.last_background=-1,this.transitioning=!1,this.og_transition_property="",this.og_background_property=""}next(){if(this.transitioning)return 1;this.transitioning=!0;let r=this.last_background;if(this.random_order)do{r=Math.floor(Math.random()*(this.background_arr.length-1-0+1)+0)}while(1!=this.background_arr.length&&r==this.last_background);else r=r=this.last_background+1>this.background_arr.length-1?0:++this.last_background;let n=bRando.extractImgURL(this.background_arr[r]);return 1==n||bRando.isPreloadedImg(n)?(this.elements.forEach(n=>{n.style.background=this.background_arr[r],"initial"==n.style.backgroundImage&&(n.style.backgroundImage="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=)"),"initial"==n.style.backgroundSize&&(n.style.backgroundSize="cover"),"initial"==n.style.backgroundRepeat&&(n.style.backgroundRepeat="no-repeat"),"initial"==n.style.backgroundAttachment&&(n.style.backgroundAttachment="fixed"),"initial"==n.style.backgroundPosition&&(n.style.backgroundPosition="center")}),this.last_background=r,this.elements[this.elements.length-1].addEventListener("transitionend",()=>{this.transitioning=!1}),null!=this.randomizer_id&&(this.pause(),this.play()),0):(this.transitioning=!1,2)}pause(){return null!=this.randomizer_id?(clearInterval(this.randomizer_id),this.randomizer_id=null,0):1}play(){return null!=this.randomizer_id?1:(this.randomizer_id=setInterval(()=>this.next(),this.interval_ms),0)}remove(){return this.pause(),this.elements.forEach(r=>{r.style.transition=this.og_transition_property,r.style.background=this.og_background_property}),bRando.bRandoBackgroundRandomizers.splice(bRando.bRandoBackgroundRandomizers.indexOf(this),1),0}}